Add support for opaque types